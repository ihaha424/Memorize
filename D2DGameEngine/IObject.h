#pragma once

#include "framework.h"

typedef enum TickPropertyBit {
	TICK_NONE = 0U,
	TICK_PHYSICS = (1U << 1),
	TICK_PRE_UPDATE = (1U << 2),
	TICK_UPDATE = (1U << 3),
	TICK_POST_UPDATE = (1U << 4),
	TICK_RENDER = (1U << 5),
} TickPropertyBit;
using TickPropertyFlags = Flags;

enum EObjectStatus
{
	OS_AWAKE, OS_INACTIVE, OS_ACTIVE, OS_DESTROY, OS_CLEAN_UP
};


class IObject {
	bool tickEveryFrame{ true };
	float tickInterval{ 0.0 };
	TickPropertyFlags tickPropertyFlags{ TICK_NONE };

protected:
	EObjectStatus status = OS_AWAKE;
public:

	/**
	 * @brief 매 프레임마다 업데이트 해야할지를 표시합니다.
	 * @param _tickEverySecond True - 매 프레임마다 업데이트 합니다.
	 */
	void EnableTickEverySecond(bool _tickEverySecond) {
		tickEveryFrame = _tickEverySecond;
	}
	/**
	 * @brief 매 프레임마다 업데이트 해야하는지 여부를 반환합니다.
	 * @return True - 매 프레임마다 업데이트 합니다.
	 */
	bool IsTickingEverySecond() {
		return tickEveryFrame;
	}
	/**
	 * @brief 업데이트 인터벌을 설정합니다.
	 * @param _tickInterval 0.0 일 경우 매 프레임 업데이트
	 */
	void SetTickInterval(float _tickInterval) {
		tickInterval = _tickInterval;
	}
	/**
	 * @brief 업데이트 인터벌을 반환합니다.
	 * @return float: 업데이트 인터벌
	 */
	float GetTickInterval() {
		return tickInterval;
	}
	/**
	 * @brief 업데이트 프로퍼티를 설정합니다.
	 * 예시: TICK_PHYSICS | TICK_UPDATE - 픽스 타임 업데이트와 프레임 타임 업데이트에 틱을 실행합니다.
	 * @param _tickPropertyFlags 플레그 비트의 조합
	 */
	void SetTickProperties(TickPropertyFlags _tickPropertyFlags) {
		tickPropertyFlags = _tickPropertyFlags;
	}

	void AddTickProperties(TickPropertyFlags _tickPropertyFlags) {
		tickPropertyFlags |= _tickPropertyFlags;
	}

	/**
	 * @brief 업데이트 프로퍼티를 반환합니다.
	 * @return 업데이트 프로퍼티 플레그
	 */
	TickPropertyFlags GetTickProperties() {
		tickPropertyFlags;
	}

	bool CheckTickProperty(TickPropertyBit propertyBit)
	{
		return (tickPropertyFlags & propertyBit) != 0;
	}

	/**
	 * @brief 오브젝트의 현재 상태를 반환합니다. 
	 */
	EObjectStatus GetStatus() { return status; }
	void SetStatus(EObjectStatus _status) { status = _status; }


	virtual void FixedUpdate(float _fixedRate) {}
	virtual void PreUpdate(float _dt) {}
	virtual void Update(float _dt) {}
	virtual void PostUpdate(float _dt) {}
	virtual void Render(class D2DRenderer* _renderer) {}
};



